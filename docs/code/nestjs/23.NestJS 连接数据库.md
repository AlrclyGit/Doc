# 数据库连接

```shell
npm install @nestjs/typeorm 
npm install typeorm 
npm install pg
```

## app.module.ts

```typescript
const typeOrmModule = TypeOrmModule.forRoot({
  type: 'postgres', //数据库类型
  host: 'localhost', //host
  port: 5432, //端口
  username: 'alrcly', //账号
  password: 'loli', //密码
  database: 'alrcly_com', //数据库
  entities: [], //实体文件
  synchronize: true, // 是否自动将实体类同步到数据库
  retryDelay: 500, //重试连接数据库间隔
  retryAttempts: 10, //重试连接数据库次数
  autoLoadEntities: true, //
})
```

## entity.ts 文件

```typescript
import { Entity, Column, PrimaryGeneratedColumn } from 'typeorm'

@Entity()
export class Login {
  @PrimaryGeneratedColumn()
  id: number

  @Column()
  name: string
}
```

## module.ts 文件

```typescript
import { Login } from './entities/login.entity'
import { TypeOrmModule } from '@nestjs/typeorm'

@Module({
  imports: [TypeOrmModule.forFeature([Login])],
})
export class LoginModule {}
```
